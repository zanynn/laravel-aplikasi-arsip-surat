/*
Template Name: HUD - Responsive Bootstrap 5 Admin Template
Version: 1.0.0
Author: Sean Ngu
Website: http://www.seantheme.com/hud/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
	01. Global Variable
	02. Handle Scrollbar
	03. Handle Header Search Bar
	04. Handle Sidebar Menu
	05. Handle Sidebar Minify
	06. Handle Sidebar Minify Float Menu
	07. Handle Dropdown Close Option
	08. Handle Panel - Remove / Reload / Collapse / Expand
	09. Handle Tooltip & Popover Activation
	10. Handle Scroll to Top Button Activation
	11. Handle hexToRgba
	12. Handle Scroll to
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */
var FONT_FAMILY    = '"Chakra Petch", sans-serif';
var COLOR_THEME    = getComputedStyle(document.body).getPropertyValue('--bs-theme');
var COLOR_BLUE     = '#4e9cff';
var COLOR_GREEN    = '#1ecc33';
var COLOR_ORANGE   = '#ff9f0c';
var COLOR_RED      = '#ff6060';
var COLOR_CYAN     = '#30beff';
var COLOR_PURPLE   = '#de8cff';
var COLOR_YELLOW   = '#f9e80d';
var COLOR_INDIGO   = '#bba4ff';
var COLOR_PINK     = '#f34fa0';
var COLOR_BLACK    = '#000000';
var COLOR_WHITE    = '#FFFFFF';
var COLOR_GRAY     = '#526872';
var COLOR_DARK     = '#35434a';
var COLOR_GRAY_100 = '#c0cacf';
var COLOR_GRAY_200 = '#a8b6bc';
var COLOR_GRAY_300 = '#90a2aa';
var COLOR_GRAY_400 = '#798e98';
var COLOR_GRAY_500 = '#617a86';
var COLOR_GRAY_600 = '#526872';
var COLOR_GRAY_700 = '#44555e';
var COLOR_GRAY_800 = '#35434a';
var COLOR_GRAY_900 = '#273136';
var app = {
	id: '#app',
	isMobile: ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) || window.innerWidth < 992),
	bootstrap: {
		tooltip: {
			attr: 'data-bs-toggle="tooltip"'
		},
		popover: {
			attr: 'data-bs-toggle="popover"'
		},
		modal: {
			attr: 'data-bs-toggle="modal"',
			dismissAttr: 'data-bs-dismiss="modal"',
			event: {
				hidden: 'hidden.bs.modal'
			}
		},
		nav: {
			class: 'nav',
			tabs: {
				class: 'nav-tabs',
				activeClass: 'active',
				itemClass: 'nav-item',
				itemLinkClass: 'nav-link'
			}
		}
	},
	header: {
		id: '#header',
		class: 'app-header',
		hasScrollClass: 'has-scroll'
	},
	sidebar: {
		id: '#sidebar',
		class: 'app-sidebar',
		scrollBar: {
			localStorage: 'appSidebarScrollPosition',
			dom: ''
		},
		menu: {
			class: 'menu',
			animationTime: 0,
			itemClass: 'menu-item',
			itemLinkClass: 'menu-link',
			hasSubClass: 'has-sub',
			activeClass: 'active',
			expandingClass: 'expanding',
			expandClass: 'expand',
			submenu: {
				class: 'menu-submenu',
			}
		},
		mobile: {
			toggleAttr: 'data-toggle="app-sidebar-mobile"',
			dismissAttr: 'data-dismiss="app-sidebar-mobile"',
			toggledClass: 'app-sidebar-mobile-toggled',
			closedClass: 'app-sidebar-mobile-closed',
			backdrop: {
				class: 'app-sidebar-mobile-backdrop'
			}
		},
		minify: {
			toggleAttr: 'data-toggle="app-sidebar-minify"',
			toggledClass: 'app-sidebar-minified',
			cookieName: 'app-sidebar-minified'
		},
		floatSubmenu: {
			id: '#app-sidebar-float-submenu',
			dom: '',
			timeout: '',
			class: 'app-sidebar-float-submenu',
			container: {
				class: 'app-sidebar-float-submenu-container'
			},
			arrow: {
				id: '#app-sidebar-float-submenu-arrow',
				class: 'app-sidebar-float-submenu-arrow'
			},
			line: {
				id: '#app-sidebar-float-submenu-line',
				class: 'app-sidebar-float-submenu-line'
			},
			overflow: {
				class: 'overflow-scroll mh-100vh'
			}
		},
		search: {
			class: 'menu-search',
			toggleAttr: 'data-sidebar-search="true"',
			hideClass: 'd-none',
			foundClass: 'has-text'
		},
		transparent: {
			class: 'app-sidebar-transparent'
		}
	},
	scrollBar: {
		attr: 'data-scrollbar="true"',
		skipMobileAttr: 'data-skip-mobile',
		initAttr: 'data-init',
		heightAttr: 'data-height',
		wheelPropagationAttr: 'data-wheel-propagation'
	},
	content: {
		id: '#content',
		class: 'app-content',
		fullHeight: {
			class: 'app-content-full-height'
		},
		fullWidth: {
			class: 'app-content-full-width'
		}
	},
	layout: {
		sidebarLight: {
			class: 'app-with-light-sidebar'
		},
		sidebarEnd: {
			class: 'app-with-end-sidebar'
		},
		sidebarWide: {
			class: 'app-with-wide-sidebar'
		},
		sidebarMinified: {
			class: 'app-sidebar-minified'
		},
		sidebarTwo: {
			class: 'app-with-two-sidebar'
		},
		withoutHeader: {
			class: 'app-without-header'
		},
		withoutSidebar: {
			class: 'app-without-sidebar'
		},
		topMenu: {
			class: 'app-with-top-menu'
		},
		boxedLayout: {
			class: 'boxed-layout'
		}
	},
	scrollToTopBtn: {
		showClass: 'show',
		heightShow: 200,
		toggleAttr: 'data-toggle="scroll-to-top"',
		scrollSpeed: 500
	},
	scrollTo: {
		attr: 'data-toggle="scroll-to"',
		target: 'data-target',
		linkTarget: 'href'
	},
	themePanel: {
		class: 'app-theme-panel',
		toggleAttr: 'data-toggle="theme-panel-expand"',
		cookieName: 'app-theme-panel-expand',
		activeClass: 'active',
		themeListCLass: 'app-theme-list',
		themeListItemCLass: 'app-theme-list-item',
		theme: {
			toggleAttr: 'data-toggle="theme-selector"',
			classAttr: 'data-theme-class',
			cookieName: 'app-theme',
			activeClass: 'active'
		}
	},
	dismissClass: {
		toggleAttr: 'data-dismiss-class',
		targetAttr: 'data-dismiss-target'
	},
	toggleClass: {
		toggleAttr: 'data-toggle-class',
		targetAttr: 'data-toggle-target'
	}
};



/* 02. Handle Scrollbar
------------------------------------------------ */

var handleScrollbar = function() {
	"use strict";
	var elms = document.querySelectorAll('['+ app.scrollBar.attr +']');
		
	for (var i = 0; i < elms.length; i++) {
		generateScrollbar(elms[i])
	}
};
var generateScrollbar = function(elm) {
  "use strict";
	
	if ($(elm).attr(app.scrollBar.initAttr) || (app.isMobile && $(elm).attr(app.scrollBar.skipMobileAttr))) {
		return;
	}
	var dataHeight = (!$(elm).attr(app.scrollBar.heightAttr)) ? $(elm).height() : $(elm).attr(app.scrollBar.heightAttr);
	
	$(elm).css('height', dataHeight);
	
	if(app.isMobile) {
		$(elm).css('overflow-x','scroll');
	} else {
		var dataWheelPropagation = ($(elm).attr(app.scrollBar.wheelPropagationAttr)) ? $(elm).attr(app.scrollBar.wheelPropagationAttr) : false;
		
		if ($(elm).closest('.'+ app.sidebar.class).length !== 0) {
			app.sidebar.scrollBar.dom = new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		} else {
			new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		}
	}
	$(elm).attr(app.scrollBar.initAttr, true);
};



/* 03. Handle Sidebar Menu
------------------------------------------------ */

var handleSidebarMenu = function() {
	"use strict";
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function(e) {
		e.preventDefault();
		
		var target = $(this).next('.'+ app.sidebar.menu.submenu.class);
		var otherMenu = $('.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.submenu.class).not(target);

		$(otherMenu).slideUp(app.sidebar.menu.animationTime);
		$(otherMenu).closest('.'+ app.sidebar.menu.itemClass).removeClass(app.sidebar.menu.expandClass);
		
		$(target).slideToggle(app.sidebar.menu.animationTime);
		var targetElm = $(target).closest('.'+ app.sidebar.menu.itemClass);
		if ($(targetElm).hasClass(app.sidebar.menu.expandClass)) {
			$(targetElm).removeClass(app.sidebar.menu.expandClass);
		} else {
			$(targetElm).addClass(app.sidebar.menu.expandClass);
		}
	});
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' .'+ app.sidebar.menu.submenu.class +' .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function(e) {
		e.preventDefault();
		
		var target = $(this).next('.' + app.sidebar.menu.submenu.class);
		$(target).slideToggle(app.sidebar.menu.animationTime);
	});
};



/* 04. Handle Sidebar Scroll Memory
------------------------------------------------ */

var handleSidebarScrollMemory = function() {
	if (!app.isMobile) {
		try {
			if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
				$('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').on('scroll', function() {
					localStorage.setItem(app.sidebar.scrollBar.localStorage, $(this).scrollTop());
				});
	
				var defaultScroll = localStorage.getItem(app.sidebar.scrollBar.localStorage);
				if (defaultScroll) {
					console.log(defaultScroll);
					$('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').animate({ scrollTop: defaultScroll + 'px'}, 0);
				}
			}
		} catch (error) {
			console.log(error);
		}
	}
};



/* 05. Handle Card Action
------------------------------------------------ */

var cardActionRunning = false;
var handleCardAction = function() {
	"use strict";

	if (cardActionRunning) {
		return false;
	}
	cardActionRunning = true;

	// expand
	$(document).on('mouseover', '[data-toggle=card-expand]', function(e) {
		if (!$(this).attr('data-init')) {
			$(this).tooltip({
				title: 'Expand / Compress',
				placement: 'bottom',
				trigger: 'hover',
				container: 'body'
			});
			$(this).tooltip('show');
			$(this).attr('data-init', true);
		}
	});
	$(document).on('click', '[data-toggle=card-expand]', function(e) {
		e.preventDefault();
		var target = $(this).closest('.card');
		var targetBody = $(target).find('.card-body');
		var targetClass = 'card-expand';
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(targetClass) && $(target).hasClass(targetClass)) {
			$('body, .card').removeClass(targetClass);
			$('.card').removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(targetClass);
			$(this).closest('.card').addClass(targetClass);
		}
		$(window).trigger('resize');
	});
};



/* 06. Handle Tooltip & Popover Activation
------------------------------------------------ */

var handelTooltipPopoverActivation = function() {
	"use strict";
	
	if ($('['+ app.bootstrap.tooltip.attr +']').length !== 0) {
		var tooltipTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.tooltip.attr +']'))
		var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
			return new bootstrap.Tooltip(tooltipTriggerEl)
		})
	}
	if ($('['+ app.bootstrap.popover.attr +']').length !== 0) {
		var popoverTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.popover.attr +']'))
		var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
			return new bootstrap.Popover(popoverTriggerEl)
		})
	}
};



/* 07. Handle Scroll to Top Button
------------------------------------------------ */

var handleScrollToTopButton = function() {
	"use strict";
	
	$(document).scroll( function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= app.scrollToTopBtn.heightShow) {
			if (!$('['+ app.scrollToTopBtn.toggleAttr +']').hasClass(app.scrollToTopBtn.showClass)) {
				$('['+ app.scrollToTopBtn.toggleAttr +']').addClass(app.scrollToTopBtn.showClass);
			}
		} else {
			$('['+ app.scrollToTopBtn.toggleAttr +']').removeClass(app.scrollToTopBtn.showClass);
		}
	});

	$('['+ app.scrollToTopBtn.toggleAttr +']').click(function(e) {
		e.preventDefault();
		
		$('html, body').animate({
			scrollTop: $('body').offset().top
		}, app.scrollToTopBtn.scrollSpeed);
	});

};



/* 08. Handle hexToRgba
------------------------------------------------ */

var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};



/* 09. Handle Scroll To
------------------------------------------------ */

var handleScrollTo = function() {
	$(document).on('click', '['+ app.scrollTo.attr +']', function(e) {
		e.preventDefault();
		
		var targetElm = ($(this).attr(app.scrollTo.target)) ? $(this).attr(app.scrollTo.target) : $(this).attr(app.scrollTo.linkTarget);
		if (targetElm) {
			$('html, body').animate({
				scrollTop: $(targetElm).offset().top - $(app.header.id).height() - 24
			}, 0);
		}
	});
};



/* 10. Handle Page Scroll Class
------------------------------------------------ */

var handlePageScrollClass = function() {
	var checkScroll = function() {
		if ($(window).scrollTop() > 0) {
			$(app.id).addClass(app.header.hasScrollClass);
		} else {
			$(app.id).removeClass(app.header.hasScrollClass);
		}
	}
	
	$(window).on('scroll', function() {
		checkScroll();
	});
	
	checkScroll();
};



/* 11. Handle Toggle Class
------------------------------------------------ */

var handleToggleClass = function() {
	$(document).on('click', '['+ app.toggleClass.toggleAttr +']', function(e) {
		e.preventDefault();
		
		var targetToggleClass = $(this).attr(app.toggleClass.toggleAttr);
		var targetDismissClass = $(this).attr(app.dismissClass.toggleAttr);
		var targetToggleElm = $(this).attr(app.toggleClass.targetAttr);
		
		if (!targetDismissClass) {
			$(targetToggleElm).toggleClass(targetToggleClass);
		} else {
			if (!$(targetToggleElm).hasClass(targetToggleClass) && !$(targetToggleElm).hasClass(targetDismissClass)) {
				$(targetToggleElm).toggleClass(targetToggleClass);
			} else {
				$(targetToggleElm).toggleClass(targetToggleClass);
				$(targetToggleElm).toggleClass(targetDismissClass);
			}
		}
	});
}



/* 12. Handle Theme Panel
------------------------------------------------ */

var handleThemePanel = function() {
	"use strict";
	
	// 12.1 Theme Panel - Toggle / Dismiss
	$(document).on('click', '['+ app.themePanel.toggleAttr +']', function() {
		var targetContainer = '.'+ app.themePanel.class;
		var targetExpand = false;
		
		if ($(targetContainer).hasClass(app.themePanel.activeClass)) {
			$(targetContainer).removeClass(app.themePanel.activeClass);
		} else {
			$(targetContainer).addClass(app.themePanel.activeClass);
			targetExpand = true;
		}
		if (Cookies) {
			Cookies.set(app.themePanel.cookieName, targetExpand);
		}
	});
	
	// 12.2 Theme Panel - Page Load Cookies 
	if (Cookies) {
		var themePanelExpand = Cookies.get(app.themePanel.cookieName);
		
		if (themePanelExpand == 'true' || typeof themePanelExpand == 'undefined') {
			$('['+ app.themePanel.toggleAttr +']').trigger('click');
		}
	}
	
	
	// 12.3 Theme Panel - Theme Selector
	$(document).on('click', '.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']', function() {
		
		for (var x = 0; x < document.body.classList.length; x++) {
			var targetClass = document.body.classList[x];
			if (targetClass.search('theme-') > -1) {
				$('body').removeClass(targetClass);
			}
		}
		
		var targetTheme = $(this).attr(app.themePanel.theme.classAttr);
		
		$('body').addClass(targetTheme);
		$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']').not(this).closest('.'+ app.themePanel.themeListItemCLass).removeClass(app.themePanel.theme.activeClass);
		$(this).closest('.'+ app.themePanel.themeListItemCLass).addClass(app.themePanel.theme.activeClass);
		
		if (Cookies) {
			Cookies.set(app.themePanel.theme.cookieName, targetTheme);
			COLOR_THEME = getComputedStyle(document.body).getPropertyValue('--bs-theme');
			$(document).trigger('theme-reload');
		}
	});
	
	if (Cookies) {
		if (Cookies.get(app.themePanel.theme.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']' + '['+ app.themePanel.theme.classAttr +'="'+ Cookies.get(app.themePanel.theme.cookieName) +'"]').trigger('click');
			
			COLOR_THEME = getComputedStyle(document.body).getPropertyValue('--bs-theme');
			
			$(document).trigger('theme-reload');
		}
	}
};

/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initComponent();
			this.initSidebar();
		},
		initSidebar: function() {
			handleSidebarMenu();
			handleSidebarScrollMemory();
		},
		initComponent: function() {
			handleScrollbar();
			handleScrollToTopButton();
			handleScrollTo();
			handleCardAction();
			handelTooltipPopoverActivation();
			handlePageScrollClass();
			handleToggleClass();
			handleThemePanel();
		},
		scrollTop: function() {
			$('html, body, .content').animate({
				scrollTop: $('body').offset().top
			}, 0);
		}
	};
}();

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuVGVtcGxhdGUgTmFtZTogSFVEIC0gUmVzcG9uc2l2ZSBCb290c3RyYXAgNSBBZG1pbiBUZW1wbGF0ZVxuVmVyc2lvbjogMS4wLjBcbkF1dGhvcjogU2VhbiBOZ3VcbldlYnNpdGU6IGh0dHA6Ly93d3cuc2VhbnRoZW1lLmNvbS9odWQvXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRBUFBTIENPTlRFTlQgVEFCTEVcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdDwhLS0gPT09PT09PT0gR0xPQkFMIFNDUklQVCBTRVRUSU5HID09PT09PT09IC0tPlxuXHQwMS4gR2xvYmFsIFZhcmlhYmxlXG5cdDAyLiBIYW5kbGUgU2Nyb2xsYmFyXG5cdDAzLiBIYW5kbGUgSGVhZGVyIFNlYXJjaCBCYXJcblx0MDQuIEhhbmRsZSBTaWRlYmFyIE1lbnVcblx0MDUuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeVxuXHQwNi4gSGFuZGxlIFNpZGViYXIgTWluaWZ5IEZsb2F0IE1lbnVcblx0MDcuIEhhbmRsZSBEcm9wZG93biBDbG9zZSBPcHRpb25cblx0MDguIEhhbmRsZSBQYW5lbCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXG5cdDA5LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuXHQxMC4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cblx0MTEuIEhhbmRsZSBoZXhUb1JnYmFcblx0MTIuIEhhbmRsZSBTY3JvbGwgdG9cblx0XG5cdDwhLS0gPT09PT09PT0gQVBQTElDQVRJT04gU0VUVElORyA9PT09PT09PSAtLT5cblx0QXBwbGljYXRpb24gQ29udHJvbGxlclxuKi9cblxuXG5cbi8qIDAxLiBHbG9iYWwgVmFyaWFibGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIEZPTlRfRkFNSUxZICAgID0gJ1wiQ2hha3JhIFBldGNoXCIsIHNhbnMtc2VyaWYnO1xudmFyIENPTE9SX1RIRU1FICAgID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXRoZW1lJyk7XG52YXIgQ09MT1JfQkxVRSAgICAgPSAnIzRlOWNmZic7XG52YXIgQ09MT1JfR1JFRU4gICAgPSAnIzFlY2MzMyc7XG52YXIgQ09MT1JfT1JBTkdFICAgPSAnI2ZmOWYwYyc7XG52YXIgQ09MT1JfUkVEICAgICAgPSAnI2ZmNjA2MCc7XG52YXIgQ09MT1JfQ1lBTiAgICAgPSAnIzMwYmVmZic7XG52YXIgQ09MT1JfUFVSUExFICAgPSAnI2RlOGNmZic7XG52YXIgQ09MT1JfWUVMTE9XICAgPSAnI2Y5ZTgwZCc7XG52YXIgQ09MT1JfSU5ESUdPICAgPSAnI2JiYTRmZic7XG52YXIgQ09MT1JfUElOSyAgICAgPSAnI2YzNGZhMCc7XG52YXIgQ09MT1JfQkxBQ0sgICAgPSAnIzAwMDAwMCc7XG52YXIgQ09MT1JfV0hJVEUgICAgPSAnI0ZGRkZGRic7XG52YXIgQ09MT1JfR1JBWSAgICAgPSAnIzUyNjg3Mic7XG52YXIgQ09MT1JfREFSSyAgICAgPSAnIzM1NDM0YSc7XG52YXIgQ09MT1JfR1JBWV8xMDAgPSAnI2MwY2FjZic7XG52YXIgQ09MT1JfR1JBWV8yMDAgPSAnI2E4YjZiYyc7XG52YXIgQ09MT1JfR1JBWV8zMDAgPSAnIzkwYTJhYSc7XG52YXIgQ09MT1JfR1JBWV80MDAgPSAnIzc5OGU5OCc7XG52YXIgQ09MT1JfR1JBWV81MDAgPSAnIzYxN2E4Nic7XG52YXIgQ09MT1JfR1JBWV82MDAgPSAnIzUyNjg3Mic7XG52YXIgQ09MT1JfR1JBWV83MDAgPSAnIzQ0NTU1ZSc7XG52YXIgQ09MT1JfR1JBWV84MDAgPSAnIzM1NDM0YSc7XG52YXIgQ09MT1JfR1JBWV85MDAgPSAnIzI3MzEzNic7XG52YXIgYXBwID0ge1xuXHRpZDogJyNhcHAnLFxuXHRpc01vYmlsZTogKCgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHx8IHdpbmRvdy5pbm5lcldpZHRoIDwgOTkyKSxcblx0Ym9vdHN0cmFwOiB7XG5cdFx0dG9vbHRpcDoge1xuXHRcdFx0YXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwidG9vbHRpcFwiJ1xuXHRcdH0sXG5cdFx0cG9wb3Zlcjoge1xuXHRcdFx0YXR0cjogJ2RhdGEtYnMtdG9nZ2xlPVwicG9wb3ZlclwiJ1xuXHRcdH0sXG5cdFx0bW9kYWw6IHtcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cIm1vZGFsXCInLFxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiJyxcblx0XHRcdGV2ZW50OiB7XG5cdFx0XHRcdGhpZGRlbjogJ2hpZGRlbi5icy5tb2RhbCdcblx0XHRcdH1cblx0XHR9LFxuXHRcdG5hdjoge1xuXHRcdFx0Y2xhc3M6ICduYXYnLFxuXHRcdFx0dGFiczoge1xuXHRcdFx0XHRjbGFzczogJ25hdi10YWJzJyxcblx0XHRcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuXHRcdFx0XHRpdGVtQ2xhc3M6ICduYXYtaXRlbScsXG5cdFx0XHRcdGl0ZW1MaW5rQ2xhc3M6ICduYXYtbGluaydcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGhlYWRlcjoge1xuXHRcdGlkOiAnI2hlYWRlcicsXG5cdFx0Y2xhc3M6ICdhcHAtaGVhZGVyJyxcblx0XHRoYXNTY3JvbGxDbGFzczogJ2hhcy1zY3JvbGwnXG5cdH0sXG5cdHNpZGViYXI6IHtcblx0XHRpZDogJyNzaWRlYmFyJyxcblx0XHRjbGFzczogJ2FwcC1zaWRlYmFyJyxcblx0XHRzY3JvbGxCYXI6IHtcblx0XHRcdGxvY2FsU3RvcmFnZTogJ2FwcFNpZGViYXJTY3JvbGxQb3NpdGlvbicsXG5cdFx0XHRkb206ICcnXG5cdFx0fSxcblx0XHRtZW51OiB7XG5cdFx0XHRjbGFzczogJ21lbnUnLFxuXHRcdFx0YW5pbWF0aW9uVGltZTogMCxcblx0XHRcdGl0ZW1DbGFzczogJ21lbnUtaXRlbScsXG5cdFx0XHRpdGVtTGlua0NsYXNzOiAnbWVudS1saW5rJyxcblx0XHRcdGhhc1N1YkNsYXNzOiAnaGFzLXN1YicsXG5cdFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0XHRleHBhbmRpbmdDbGFzczogJ2V4cGFuZGluZycsXG5cdFx0XHRleHBhbmRDbGFzczogJ2V4cGFuZCcsXG5cdFx0XHRzdWJtZW51OiB7XG5cdFx0XHRcdGNsYXNzOiAnbWVudS1zdWJtZW51Jyxcblx0XHRcdH1cblx0XHR9LFxuXHRcdG1vYmlsZToge1xuXHRcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwiYXBwLXNpZGViYXItbW9iaWxlXCInLFxuXHRcdFx0ZGlzbWlzc0F0dHI6ICdkYXRhLWRpc21pc3M9XCJhcHAtc2lkZWJhci1tb2JpbGVcIicsXG5cdFx0XHR0b2dnbGVkQ2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtdG9nZ2xlZCcsXG5cdFx0XHRjbG9zZWRDbGFzczogJ2FwcC1zaWRlYmFyLW1vYmlsZS1jbG9zZWQnLFxuXHRcdFx0YmFja2Ryb3A6IHtcblx0XHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtYmFja2Ryb3AnXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRtaW5pZnk6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1zaWRlYmFyLW1pbmlmeVwiJyxcblx0XHRcdHRvZ2dsZWRDbGFzczogJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJyxcblx0XHRcdGNvb2tpZU5hbWU6ICdhcHAtc2lkZWJhci1taW5pZmllZCdcblx0XHR9LFxuXHRcdGZsb2F0U3VibWVudToge1xuXHRcdFx0aWQ6ICcjYXBwLXNpZGViYXItZmxvYXQtc3VibWVudScsXG5cdFx0XHRkb206ICcnLFxuXHRcdFx0dGltZW91dDogJycsXG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUnLFxuXHRcdFx0Y29udGFpbmVyOiB7XG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1jb250YWluZXInXG5cdFx0XHR9LFxuXHRcdFx0YXJyb3c6IHtcblx0XHRcdFx0aWQ6ICcjYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1hcnJvdycsXG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1hcnJvdydcblx0XHRcdH0sXG5cdFx0XHRsaW5lOiB7XG5cdFx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtbGluZScsXG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItZmxvYXQtc3VibWVudS1saW5lJ1xuXHRcdFx0fSxcblx0XHRcdG92ZXJmbG93OiB7XG5cdFx0XHRcdGNsYXNzOiAnb3ZlcmZsb3ctc2Nyb2xsIG1oLTEwMHZoJ1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VhcmNoOiB7XG5cdFx0XHRjbGFzczogJ21lbnUtc2VhcmNoJyxcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXNpZGViYXItc2VhcmNoPVwidHJ1ZVwiJyxcblx0XHRcdGhpZGVDbGFzczogJ2Qtbm9uZScsXG5cdFx0XHRmb3VuZENsYXNzOiAnaGFzLXRleHQnXG5cdFx0fSxcblx0XHR0cmFuc3BhcmVudDoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci10cmFuc3BhcmVudCdcblx0XHR9XG5cdH0sXG5cdHNjcm9sbEJhcjoge1xuXHRcdGF0dHI6ICdkYXRhLXNjcm9sbGJhcj1cInRydWVcIicsXG5cdFx0c2tpcE1vYmlsZUF0dHI6ICdkYXRhLXNraXAtbW9iaWxlJyxcblx0XHRpbml0QXR0cjogJ2RhdGEtaW5pdCcsXG5cdFx0aGVpZ2h0QXR0cjogJ2RhdGEtaGVpZ2h0Jyxcblx0XHR3aGVlbFByb3BhZ2F0aW9uQXR0cjogJ2RhdGEtd2hlZWwtcHJvcGFnYXRpb24nXG5cdH0sXG5cdGNvbnRlbnQ6IHtcblx0XHRpZDogJyNjb250ZW50Jyxcblx0XHRjbGFzczogJ2FwcC1jb250ZW50Jyxcblx0XHRmdWxsSGVpZ2h0OiB7XG5cdFx0XHRjbGFzczogJ2FwcC1jb250ZW50LWZ1bGwtaGVpZ2h0J1xuXHRcdH0sXG5cdFx0ZnVsbFdpZHRoOiB7XG5cdFx0XHRjbGFzczogJ2FwcC1jb250ZW50LWZ1bGwtd2lkdGgnXG5cdFx0fVxuXHR9LFxuXHRsYXlvdXQ6IHtcblx0XHRzaWRlYmFyTGlnaHQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtbGlnaHQtc2lkZWJhcidcblx0XHR9LFxuXHRcdHNpZGViYXJFbmQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtZW5kLXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyV2lkZToge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC13aWRlLXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyTWluaWZpZWQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItbWluaWZpZWQnXG5cdFx0fSxcblx0XHRzaWRlYmFyVHdvOiB7XG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLXR3by1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0d2l0aG91dEhlYWRlcjoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aG91dC1oZWFkZXInXG5cdFx0fSxcblx0XHR3aXRob3V0U2lkZWJhcjoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aG91dC1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0dG9wTWVudToge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC10b3AtbWVudSdcblx0XHR9LFxuXHRcdGJveGVkTGF5b3V0OiB7XG5cdFx0XHRjbGFzczogJ2JveGVkLWxheW91dCdcblx0XHR9XG5cdH0sXG5cdHNjcm9sbFRvVG9wQnRuOiB7XG5cdFx0c2hvd0NsYXNzOiAnc2hvdycsXG5cdFx0aGVpZ2h0U2hvdzogMjAwLFxuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10by10b3BcIicsXG5cdFx0c2Nyb2xsU3BlZWQ6IDUwMFxuXHR9LFxuXHRzY3JvbGxUbzoge1xuXHRcdGF0dHI6ICdkYXRhLXRvZ2dsZT1cInNjcm9sbC10b1wiJyxcblx0XHR0YXJnZXQ6ICdkYXRhLXRhcmdldCcsXG5cdFx0bGlua1RhcmdldDogJ2hyZWYnXG5cdH0sXG5cdHRoZW1lUGFuZWw6IHtcblx0XHRjbGFzczogJ2FwcC10aGVtZS1wYW5lbCcsXG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtcGFuZWwtZXhwYW5kXCInLFxuXHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUtcGFuZWwtZXhwYW5kJyxcblx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZScsXG5cdFx0dGhlbWVMaXN0Q0xhc3M6ICdhcHAtdGhlbWUtbGlzdCcsXG5cdFx0dGhlbWVMaXN0SXRlbUNMYXNzOiAnYXBwLXRoZW1lLWxpc3QtaXRlbScsXG5cdFx0dGhlbWU6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInRoZW1lLXNlbGVjdG9yXCInLFxuXHRcdFx0Y2xhc3NBdHRyOiAnZGF0YS10aGVtZS1jbGFzcycsXG5cdFx0XHRjb29raWVOYW1lOiAnYXBwLXRoZW1lJyxcblx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJ1xuXHRcdH1cblx0fSxcblx0ZGlzbWlzc0NsYXNzOiB7XG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtZGlzbWlzcy1jbGFzcycsXG5cdFx0dGFyZ2V0QXR0cjogJ2RhdGEtZGlzbWlzcy10YXJnZXQnXG5cdH0sXG5cdHRvZ2dsZUNsYXNzOiB7XG5cdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlLWNsYXNzJyxcblx0XHR0YXJnZXRBdHRyOiAnZGF0YS10b2dnbGUtdGFyZ2V0J1xuXHR9XG59O1xuXG5cblxuLyogMDIuIEhhbmRsZSBTY3JvbGxiYXJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlU2Nyb2xsYmFyID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgZWxtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snKyBhcHAuc2Nyb2xsQmFyLmF0dHIgKyddJyk7XG5cdFx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZWxtcy5sZW5ndGg7IGkrKykge1xuXHRcdGdlbmVyYXRlU2Nyb2xsYmFyKGVsbXNbaV0pXG5cdH1cbn07XG52YXIgZ2VuZXJhdGVTY3JvbGxiYXIgPSBmdW5jdGlvbihlbG0pIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRpZiAoJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci5pbml0QXR0cikgfHwgKGFwcC5pc01vYmlsZSAmJiAkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLnNraXBNb2JpbGVBdHRyKSkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIGRhdGFIZWlnaHQgPSAoISQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIuaGVpZ2h0QXR0cikpID8gJChlbG0pLmhlaWdodCgpIDogJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKTtcblx0XG5cdCQoZWxtKS5jc3MoJ2hlaWdodCcsIGRhdGFIZWlnaHQpO1xuXHRcblx0aWYoYXBwLmlzTW9iaWxlKSB7XG5cdFx0JChlbG0pLmNzcygnb3ZlcmZsb3cteCcsJ3Njcm9sbCcpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBkYXRhV2hlZWxQcm9wYWdhdGlvbiA9ICgkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLndoZWVsUHJvcGFnYXRpb25BdHRyKSkgPyAkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLndoZWVsUHJvcGFnYXRpb25BdHRyKSA6IGZhbHNlO1xuXHRcdFxuXHRcdGlmICgkKGVsbSkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzKS5sZW5ndGggIT09IDApIHtcblx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhci5kb20gPSBuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcblx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcblx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHQkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmluaXRBdHRyLCB0cnVlKTtcbn07XG5cblxuXG4vKiAwMy4gSGFuZGxlIFNpZGViYXIgTWVudVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVTaWRlYmFyTWVudSA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5uZXh0KCcuJysgYXBwLnNpZGViYXIubWVudS5zdWJtZW51LmNsYXNzKTtcblx0XHR2YXIgb3RoZXJNZW51ID0gJCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51LmNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5zdWJtZW51LmNsYXNzKS5ub3QodGFyZ2V0KTtcblxuXHRcdCQob3RoZXJNZW51KS5zbGlkZVVwKGFwcC5zaWRlYmFyLm1lbnUuYW5pbWF0aW9uVGltZSk7XG5cdFx0JChvdGhlck1lbnUpLmNsb3Nlc3QoJy4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcykucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XG5cdFx0XG5cdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKGFwcC5zaWRlYmFyLm1lbnUuYW5pbWF0aW9uVGltZSk7XG5cdFx0dmFyIHRhcmdldEVsbSA9ICQodGFyZ2V0KS5jbG9zZXN0KCcuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MpO1xuXHRcdGlmICgkKHRhcmdldEVsbSkuaGFzQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcykpIHtcblx0XHRcdCQodGFyZ2V0RWxtKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCh0YXJnZXRFbG0pLmFkZENsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpO1xuXHRcdH1cblx0fSk7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5zdWJtZW51LmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5uZXh0KCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyk7XG5cdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKGFwcC5zaWRlYmFyLm1lbnUuYW5pbWF0aW9uVGltZSk7XG5cdH0pO1xufTtcblxuXG5cbi8qIDA0LiBIYW5kbGUgU2lkZWJhciBTY3JvbGwgTWVtb3J5XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVNpZGViYXJTY3JvbGxNZW1vcnkgPSBmdW5jdGlvbigpIHtcblx0aWYgKCFhcHAuaXNNb2JpbGUpIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mKGxvY2FsU3RvcmFnZSkgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyBbJysgYXBwLnNjcm9sbEJhci5hdHRyICsnXScpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlLCAkKHRoaXMpLnNjcm9sbFRvcCgpKTtcblx0XHRcdFx0fSk7XG5cdFxuXHRcdFx0XHR2YXIgZGVmYXVsdFNjcm9sbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGFwcC5zaWRlYmFyLnNjcm9sbEJhci5sb2NhbFN0b3JhZ2UpO1xuXHRcdFx0XHRpZiAoZGVmYXVsdFNjcm9sbCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRlZmF1bHRTY3JvbGwpO1xuXHRcdFx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyBbJysgYXBwLnNjcm9sbEJhci5hdHRyICsnXScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGRlZmF1bHRTY3JvbGwgKyAncHgnfSwgMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdH1cblx0fVxufTtcblxuXG5cbi8qIDA1LiBIYW5kbGUgQ2FyZCBBY3Rpb25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgY2FyZEFjdGlvblJ1bm5pbmcgPSBmYWxzZTtcbnZhciBoYW5kbGVDYXJkQWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmIChjYXJkQWN0aW9uUnVubmluZykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRjYXJkQWN0aW9uUnVubmluZyA9IHRydWU7XG5cblx0Ly8gZXhwYW5kXG5cdCQoZG9jdW1lbnQpLm9uKCdtb3VzZW92ZXInLCAnW2RhdGEtdG9nZ2xlPWNhcmQtZXhwYW5kXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRpZiAoISQodGhpcykuYXR0cignZGF0YS1pbml0JykpIHtcblx0XHRcdCQodGhpcykudG9vbHRpcCh7XG5cdFx0XHRcdHRpdGxlOiAnRXhwYW5kIC8gQ29tcHJlc3MnLFxuXHRcdFx0XHRwbGFjZW1lbnQ6ICdib3R0b20nLFxuXHRcdFx0XHR0cmlnZ2VyOiAnaG92ZXInLFxuXHRcdFx0XHRjb250YWluZXI6ICdib2R5J1xuXHRcdFx0fSk7XG5cdFx0XHQkKHRoaXMpLnRvb2x0aXAoJ3Nob3cnKTtcblx0XHRcdCQodGhpcykuYXR0cignZGF0YS1pbml0JywgdHJ1ZSk7XG5cdFx0fVxuXHR9KTtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXRvZ2dsZT1jYXJkLWV4cGFuZF0nLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJyk7XG5cdFx0dmFyIHRhcmdldEJvZHkgPSAkKHRhcmdldCkuZmluZCgnLmNhcmQtYm9keScpO1xuXHRcdHZhciB0YXJnZXRDbGFzcyA9ICdjYXJkLWV4cGFuZCc7XG5cdFx0dmFyIHRhcmdldFRvcCA9IDQwO1xuXHRcdGlmICgkKHRhcmdldEJvZHkpLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0dmFyIHRhcmdldE9mZnNldFRvcCA9ICQodGFyZ2V0KS5vZmZzZXQoKS50b3A7XG5cdFx0XHR2YXIgdGFyZ2V0Qm9keU9mZnNldFRvcCA9ICQodGFyZ2V0Qm9keSkub2Zmc2V0KCkudG9wO1xuXHRcdFx0dGFyZ2V0VG9wID0gdGFyZ2V0Qm9keU9mZnNldFRvcCAtIHRhcmdldE9mZnNldFRvcDtcblx0XHR9XG5cblx0XHRpZiAoJCgnYm9keScpLmhhc0NsYXNzKHRhcmdldENsYXNzKSAmJiAkKHRhcmdldCkuaGFzQ2xhc3ModGFyZ2V0Q2xhc3MpKSB7XG5cdFx0XHQkKCdib2R5LCAuY2FyZCcpLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdCQoJy5jYXJkJykucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHRcdCQodGFyZ2V0Qm9keSkucmVtb3ZlQXR0cignc3R5bGUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnYm9keScpLmFkZENsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5hZGRDbGFzcyh0YXJnZXRDbGFzcyk7XG5cdFx0fVxuXHRcdCQod2luZG93KS50cmlnZ2VyKCdyZXNpemUnKTtcblx0fSk7XG59O1xuXG5cblxuLyogMDYuIEhhbmRsZSBUb29sdGlwICYgUG9wb3ZlciBBY3RpdmF0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdGlmICgkKCdbJysgYXBwLmJvb3RzdHJhcC50b29sdGlwLmF0dHIgKyddJykubGVuZ3RoICE9PSAwKSB7XG5cdFx0dmFyIHRvb2x0aXBUcmlnZ2VyTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5ib290c3RyYXAudG9vbHRpcC5hdHRyICsnXScpKVxuXHRcdHZhciB0b29sdGlwTGlzdCA9IHRvb2x0aXBUcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24gKHRvb2x0aXBUcmlnZ2VyRWwpIHtcblx0XHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodG9vbHRpcFRyaWdnZXJFbClcblx0XHR9KVxuXHR9XG5cdGlmICgkKCdbJysgYXBwLmJvb3RzdHJhcC5wb3BvdmVyLmF0dHIgKyddJykubGVuZ3RoICE9PSAwKSB7XG5cdFx0dmFyIHBvcG92ZXJUcmlnZ2VyTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5ib290c3RyYXAucG9wb3Zlci5hdHRyICsnXScpKVxuXHRcdHZhciBwb3BvdmVyTGlzdCA9IHBvcG92ZXJUcmlnZ2VyTGlzdC5tYXAoZnVuY3Rpb24gKHBvcG92ZXJUcmlnZ2VyRWwpIHtcblx0XHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlBvcG92ZXIocG9wb3ZlclRyaWdnZXJFbClcblx0XHR9KVxuXHR9XG59O1xuXG5cblxuLyogMDcuIEhhbmRsZSBTY3JvbGwgdG8gVG9wIEJ1dHRvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdCQoZG9jdW1lbnQpLnNjcm9sbCggZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRvdGFsU2Nyb2xsID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk7XG5cblx0XHRpZiAodG90YWxTY3JvbGwgPj0gYXBwLnNjcm9sbFRvVG9wQnRuLmhlaWdodFNob3cpIHtcblx0XHRcdGlmICghJCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLmhhc0NsYXNzKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpKSB7XG5cdFx0XHRcdCQoJ1snKyBhcHAuc2Nyb2xsVG9Ub3BCdG4udG9nZ2xlQXR0ciArJ10nKS5hZGRDbGFzcyhhcHAuc2Nyb2xsVG9Ub3BCdG4uc2hvd0NsYXNzKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLnJlbW92ZUNsYXNzKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuXHRcdFx0c2Nyb2xsVG9wOiAkKCdib2R5Jykub2Zmc2V0KCkudG9wXG5cdFx0fSwgYXBwLnNjcm9sbFRvVG9wQnRuLnNjcm9sbFNwZWVkKTtcblx0fSk7XG5cbn07XG5cblxuXG4vKiAwOC4gSGFuZGxlIGhleFRvUmdiYVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoZXhUb1JnYmEgPSBmdW5jdGlvbihoZXgsIHRyYW5zcGFyZW50ID0gMSkge1xuXHR2YXIgYztcblx0aWYoL14jKFtBLUZhLWYwLTldezN9KXsxLDJ9JC8udGVzdChoZXgpKXtcblx0XHRcdGM9IGhleC5zdWJzdHJpbmcoMSkuc3BsaXQoJycpO1xuXHRcdFx0aWYoYy5sZW5ndGg9PSAzKXtcblx0XHRcdFx0XHRjPSBbY1swXSwgY1swXSwgY1sxXSwgY1sxXSwgY1syXSwgY1syXV07XG5cdFx0XHR9XG5cdFx0XHRjPSAnMHgnK2Muam9pbignJyk7XG5cdFx0XHRyZXR1cm4gJ3JnYmEoJytbKGM+PjE2KSYyNTUsIChjPj44KSYyNTUsIGMmMjU1XS5qb2luKCcsJykrJywnKyB0cmFuc3BhcmVudCArJyknO1xuXHR9XG4gIHRocm93IG5ldyBFcnJvcignQmFkIEhleCcpO1xufTtcblxuXG5cbi8qIDA5LiBIYW5kbGUgU2Nyb2xsIFRvXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVNjcm9sbFRvID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnNjcm9sbFRvLmF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0RWxtID0gKCQodGhpcykuYXR0cihhcHAuc2Nyb2xsVG8udGFyZ2V0KSkgPyAkKHRoaXMpLmF0dHIoYXBwLnNjcm9sbFRvLnRhcmdldCkgOiAkKHRoaXMpLmF0dHIoYXBwLnNjcm9sbFRvLmxpbmtUYXJnZXQpO1xuXHRcdGlmICh0YXJnZXRFbG0pIHtcblx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcblx0XHRcdFx0c2Nyb2xsVG9wOiAkKHRhcmdldEVsbSkub2Zmc2V0KCkudG9wIC0gJChhcHAuaGVhZGVyLmlkKS5oZWlnaHQoKSAtIDI0XG5cdFx0XHR9LCAwKTtcblx0XHR9XG5cdH0pO1xufTtcblxuXG5cbi8qIDEwLiBIYW5kbGUgUGFnZSBTY3JvbGwgQ2xhc3Ncbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlUGFnZVNjcm9sbENsYXNzID0gZnVuY3Rpb24oKSB7XG5cdHZhciBjaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAwKSB7XG5cdFx0XHQkKGFwcC5pZCkuYWRkQ2xhc3MoYXBwLmhlYWRlci5oYXNTY3JvbGxDbGFzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoYXBwLmlkKS5yZW1vdmVDbGFzcyhhcHAuaGVhZGVyLmhhc1Njcm9sbENsYXNzKTtcblx0XHR9XG5cdH1cblx0XG5cdCQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG5cdFx0Y2hlY2tTY3JvbGwoKTtcblx0fSk7XG5cdFxuXHRjaGVja1Njcm9sbCgpO1xufTtcblxuXG5cbi8qIDExLiBIYW5kbGUgVG9nZ2xlIENsYXNzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnRvZ2dsZUNsYXNzLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0VG9nZ2xlQ2xhc3MgPSAkKHRoaXMpLmF0dHIoYXBwLnRvZ2dsZUNsYXNzLnRvZ2dsZUF0dHIpO1xuXHRcdHZhciB0YXJnZXREaXNtaXNzQ2xhc3MgPSAkKHRoaXMpLmF0dHIoYXBwLmRpc21pc3NDbGFzcy50b2dnbGVBdHRyKTtcblx0XHR2YXIgdGFyZ2V0VG9nZ2xlRWxtID0gJCh0aGlzKS5hdHRyKGFwcC50b2dnbGVDbGFzcy50YXJnZXRBdHRyKTtcblx0XHRcblx0XHRpZiAoIXRhcmdldERpc21pc3NDbGFzcykge1xuXHRcdFx0JCh0YXJnZXRUb2dnbGVFbG0pLnRvZ2dsZUNsYXNzKHRhcmdldFRvZ2dsZUNsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCEkKHRhcmdldFRvZ2dsZUVsbSkuaGFzQ2xhc3ModGFyZ2V0VG9nZ2xlQ2xhc3MpICYmICEkKHRhcmdldFRvZ2dsZUVsbSkuaGFzQ2xhc3ModGFyZ2V0RGlzbWlzc0NsYXNzKSkge1xuXHRcdFx0XHQkKHRhcmdldFRvZ2dsZUVsbSkudG9nZ2xlQ2xhc3ModGFyZ2V0VG9nZ2xlQ2xhc3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCh0YXJnZXRUb2dnbGVFbG0pLnRvZ2dsZUNsYXNzKHRhcmdldFRvZ2dsZUNsYXNzKTtcblx0XHRcdFx0JCh0YXJnZXRUb2dnbGVFbG0pLnRvZ2dsZUNsYXNzKHRhcmdldERpc21pc3NDbGFzcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuXG5cbi8qIDEyLiBIYW5kbGUgVGhlbWUgUGFuZWxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlVGhlbWVQYW5lbCA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdC8vIDEyLjEgVGhlbWUgUGFuZWwgLSBUb2dnbGUgLyBEaXNtaXNzXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnRoZW1lUGFuZWwudG9nZ2xlQXR0ciArJ10nLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGFyZ2V0Q29udGFpbmVyID0gJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcztcblx0XHR2YXIgdGFyZ2V0RXhwYW5kID0gZmFsc2U7XG5cdFx0XG5cdFx0aWYgKCQodGFyZ2V0Q29udGFpbmVyKS5oYXNDbGFzcyhhcHAudGhlbWVQYW5lbC5hY3RpdmVDbGFzcykpIHtcblx0XHRcdCQodGFyZ2V0Q29udGFpbmVyKS5yZW1vdmVDbGFzcyhhcHAudGhlbWVQYW5lbC5hY3RpdmVDbGFzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQodGFyZ2V0Q29udGFpbmVyKS5hZGRDbGFzcyhhcHAudGhlbWVQYW5lbC5hY3RpdmVDbGFzcyk7XG5cdFx0XHR0YXJnZXRFeHBhbmQgPSB0cnVlO1xuXHRcdH1cblx0XHRpZiAoQ29va2llcykge1xuXHRcdFx0Q29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwuY29va2llTmFtZSwgdGFyZ2V0RXhwYW5kKTtcblx0XHR9XG5cdH0pO1xuXHRcblx0Ly8gMTIuMiBUaGVtZSBQYW5lbCAtIFBhZ2UgTG9hZCBDb29raWVzIFxuXHRpZiAoQ29va2llcykge1xuXHRcdHZhciB0aGVtZVBhbmVsRXhwYW5kID0gQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwuY29va2llTmFtZSk7XG5cdFx0XG5cdFx0aWYgKHRoZW1lUGFuZWxFeHBhbmQgPT0gJ3RydWUnIHx8IHR5cGVvZiB0aGVtZVBhbmVsRXhwYW5kID09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHQkKCdbJysgYXBwLnRoZW1lUGFuZWwudG9nZ2xlQXR0ciArJ10nKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH1cblx0fVxuXHRcblx0XG5cdC8vIDEyLjMgVGhlbWUgUGFuZWwgLSBUaGVtZSBTZWxlY3RvclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGZvciAodmFyIHggPSAwOyB4IDwgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QubGVuZ3RoOyB4KyspIHtcblx0XHRcdHZhciB0YXJnZXRDbGFzcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0W3hdO1xuXHRcdFx0aWYgKHRhcmdldENsYXNzLnNlYXJjaCgndGhlbWUtJykgPiAtMSkge1xuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR2YXIgdGFyZ2V0VGhlbWUgPSAkKHRoaXMpLmF0dHIoYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyKTtcblx0XHRcblx0XHQkKCdib2R5JykuYWRkQ2xhc3ModGFyZ2V0VGhlbWUpO1xuXHRcdCQoJy4nKyBhcHAudGhlbWVQYW5lbC5jbGFzcyArJyBbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUudG9nZ2xlQXR0ciArJ10nKS5ub3QodGhpcykuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdEl0ZW1DTGFzcykucmVtb3ZlQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWUuYWN0aXZlQ2xhc3MpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lTGlzdEl0ZW1DTGFzcykuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwudGhlbWUuYWN0aXZlQ2xhc3MpO1xuXHRcdFxuXHRcdGlmIChDb29raWVzKSB7XG5cdFx0XHRDb29raWVzLnNldChhcHAudGhlbWVQYW5lbC50aGVtZS5jb29raWVOYW1lLCB0YXJnZXRUaGVtZSk7XG5cdFx0XHRDT0xPUl9USEVNRSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZScpO1xuXHRcdFx0JChkb2N1bWVudCkudHJpZ2dlcigndGhlbWUtcmVsb2FkJyk7XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpKSB7XG5cdFx0XHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLnRvZ2dsZUF0dHIgKyddJyArICdbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyICsnPVwiJysgQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWUuY29va2llTmFtZSkgKydcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XG5cdFx0XHRDT0xPUl9USEVNRSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZScpO1xuXHRcdFx0XG5cdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCd0aGVtZS1yZWxvYWQnKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qIEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIEFwcCA9IGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRyZXR1cm4ge1xuXHRcdC8vbWFpbiBmdW5jdGlvblxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuaW5pdENvbXBvbmVudCgpO1xuXHRcdFx0dGhpcy5pbml0U2lkZWJhcigpO1xuXHRcdH0sXG5cdFx0aW5pdFNpZGViYXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aGFuZGxlU2lkZWJhck1lbnUoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJTY3JvbGxNZW1vcnkoKTtcblx0XHR9LFxuXHRcdGluaXRDb21wb25lbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aGFuZGxlU2Nyb2xsYmFyKCk7XG5cdFx0XHRoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbigpO1xuXHRcdFx0aGFuZGxlU2Nyb2xsVG8oKTtcblx0XHRcdGhhbmRsZUNhcmRBY3Rpb24oKTtcblx0XHRcdGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbigpO1xuXHRcdFx0aGFuZGxlUGFnZVNjcm9sbENsYXNzKCk7XG5cdFx0XHRoYW5kbGVUb2dnbGVDbGFzcygpO1xuXHRcdFx0aGFuZGxlVGhlbWVQYW5lbCgpO1xuXHRcdH0sXG5cdFx0c2Nyb2xsVG9wOiBmdW5jdGlvbigpIHtcblx0XHRcdCQoJ2h0bWwsIGJvZHksIC5jb250ZW50JykuYW5pbWF0ZSh7XG5cdFx0XHRcdHNjcm9sbFRvcDogJCgnYm9keScpLm9mZnNldCgpLnRvcFxuXHRcdFx0fSwgMCk7XG5cdFx0fVxuXHR9O1xufSgpO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0QXBwLmluaXQoKTtcbn0pOyJdfQ==
